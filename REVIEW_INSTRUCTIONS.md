# ⚠️ REVIEW INSTRUCTIONS

> Generated by Gemini

```json
{
  "review": {
    "summary": "This PR implements a major version upgrade (v3) to the audit logic, introducing domain-based scoring and significantly expanding the check suite (~3000 LOC). While the architectural changes align with the described specs, there are significant quality risks: \n\n1. **Zero test coverage**: No new tests were added for the 24 new checks or the new scoring logic.\n2. **Compatibility**: Usage of Python 3.10+ syntax (`type | type`) without clear indication of project constraints.\n3. **Robustness**: Heuristic checks (AST, Git) may behave inconsistently across different environments or languages without stricter safeguards.\n\nI recommend adding comprehensive unit tests for the new check modules and validating the scoring logic before merging.",
    "decision": "REQUEST_CHANGES"
  },
  "issues": [
    {
      "id": 1,
      "severity": "critical",
      "file": "tests/",
      "line": 0,
      "title": "Missing unit tests for new functionality",
      "description": "The PR introduces ~3000 lines of code including 24 new audit checks and a completely new scoring algorithm (`agent_readiness_audit/checks/*.py`, `scanner.py`), but the file list shows no additions to the `tests/` directory. Deploying such a large logic expansion without test coverage (especially for heuristics involving regex and AST parsing) carries high regression risk.",
      "suggestion": "Add unit tests for each new check module (testing both pass and fail cases with mock files) and the new `DomainScore` calculation logic."
    },
    {
      "id": 2,
      "severity": "important",
      "file": "agent_readiness_audit/checks/documentation.py",
      "line": 0,
      "title": "Python version compatibility issue (PEP 604)",
      "description": "The change to use bitwise OR for type unions in `isinstance(..., type | type)` is valid only in Python 3.10+. If this tool is intended to support environments with Python 3.8 or 3.9 (common in CI/CD or older dev environments), this will raise a `TypeError`.",
      "suggestion": "Verify the project's `requires-python` constraint. If < 3.10 support is needed, revert to using a tuple: `isinstance(..., (TypeA, TypeB))`."
    },
    {
      "id": 3,
      "severity": "important",
      "file": "agent_readiness_audit/models.py",
      "line": 0,
      "title": "Missing validation for scoring weights",
      "description": "The `calculate_overall_score` function relies on `DOMAIN_WEIGHTS` to compute the final weighted percentage. There is no visible validation to ensure these weights sum exactly to 1.0 (or 100). If the configuration drifts, the calculated 'Overall Score' will be mathematically incorrect (e.g., max score < 100%).",
      "suggestion": "Add a validation assertion or check (e.g., in `__init__` or module scope) to ensure `sum(DOMAIN_WEIGHTS.values())` equals 1.0 within a floating-point tolerance."
    },
    {
      "id": 4,
      "severity": "suggestion",
      "file": "agent_readiness_audit/checks/interfaces_contracts.py",
      "line": 0,
      "title": "Language-specific checks in general audit",
      "description": "Checks like `check_return_types_documented` rely exclusively on Python AST parsing. If this audit tool is run on the 'Node.js/TypeScript' repository mentioned in the project context, these checks may result in empty/partial findings that could unfairly skew the 'Interfaces' domain score if not handled as 'Not Applicable'.",
      "suggestion": "Ensure language-specific checks return a distinct 'Skipped' or 'N/A' status that excludes them from the domain score denominator if no relevant files are found, rather than a partial pass/fail."
    }
  ]
}
```