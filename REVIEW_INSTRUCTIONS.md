# ⚠️ REVIEW INSTRUCTIONS

> Generated by Gemini

```toml
[review]
summary = "This PR introduces a comprehensive v2 Maturity Model, significantly enhancing the audit's depth. However, the introduction of several file-scanning checks (`documentation.py`, `type_contracts.py`, `agentic_security.py`) lacks consistent safeguards against resource exhaustion (DoS) when processing large files. The newly added `read_file_safe` utility in `base.py` is not utilized in these new checks. Additionally, relying on regex for configuration file parsing in strictness checks is brittle and prone to false positives."
decision = "REQUEST_CHANGES"

[[issues]]
severity = "important"
file = "agent_readiness_audit/checks/documentation.py"
line = 0
title = "Missing file size limit safeguards for AST parsing"
description = "The new `check_docstring_coverage_python` function parses every Python file in the scan directory using `ast.parse` without verifying file size. On repositories with large generated files (e.g., protobufs, vendored code), this creates a Denial of Service (OOM/Hang) risk. The `read_file_safe` utility introduced in `base.py` should be used to enforce a size limit (e.g., 1MB) before parsing."
suggestion = "Use `read_file_safe` to load content before passing to `ast.parse`, skipping files that exceed the limit."

[[issues]]
severity = "important"
file = "agent_readiness_audit/checks/type_contracts.py"
line = 0
title = "Missing file size limit safeguards for Type Hint analysis"
description = "Similar to the documentation check, `check_python_type_hint_coverage` reads and parses all Python files via `ast`. This must also utilize `read_file_safe` to prevent resource exhaustion on large files."
suggestion = "Implement `read_file_safe` for file reading in `_count_typed_functions` logic."

[[issues]]
severity = "important"
file = "agent_readiness_audit/checks/type_contracts.py"
line = 0
title = "Brittle configuration parsing via Regex"
description = "`check_mypy_strictness` relies on regex (`re.search`) to identify configuration settings (e.g., `strict = true`) in `pyproject.toml` and `.ini` files. This is prone to errors, such as matching commented-out lines (`# strict = true`) or failing on valid TOML variations. As a Gate Level 4 check, this requires robust parsing."
suggestion = "Use Python's `tomllib` (or `tomli` backport) for `pyproject.toml` and `configparser` for `.ini`/`.cfg` files to ensure accurate configuration detection."

[[issues]]
severity = "suggestion"
file = "agent_readiness_audit/models.py"
line = 0
title = "Hardcoded Check IDs in Gate Definitions"
description = "The `GATE_CHECKS` dictionary uses hardcoded string literals for check IDs (e.g., `'dependency_manifest_exists'`). If a check's ID in the `@check` decorator changes, this mapping will break silently. This coupling reduces maintainability."
suggestion = "Define public constants for check IDs within the check modules and reference them in `models.py`, or add a test ensuring all keys in `GATE_CHECKS` exist in the check registry."

[[issues]]
severity = "suggestion"
file = "agent_readiness_audit/checks/agentic_security.py"
line = 0
title = "Hardcoded prompts directory path"
description = "`check_prompt_secret_scanning` is hardcoded to scan only the `scan_dir / 'prompts'` directory. Agent architectures vary significantly (e.g., `src/prompts`, `agent/templates`), so this will likely miss prompts in many repositories."
suggestion = "Make the prompts directory configurable or use a recursive search (e.g., `scan_dir.rglob('prompts')` or `**/prompts/`) to automatically locate prompt files."
```